<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Organiser Bookings</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/main.css">
</head>
<body class="bg-light">

  <div class="container py-5">
    <div class="card shadow-sm">
      <div class="card-header bg-primary text-white">
        <h2 class="mb-0">All Bookings</h2>
      </div>
      <div class="card-body">

        <!--If no bookings exist, show message-->
        <% if (bookings.length === 0) { %>
          <div class="alert alert-info mb-0">
            No bookings have been made yet.
          </div>
        <% } else { %>
          <!--Table displaying all booking data-->
          <div class="table-responsive">
            <table class="table table-striped table-hover align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Event</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th class="text-center">Full</th>
                  <th class="text-center">Con</th>
                  <th class="text-center">Total</th>
                  <th>Made At</th>
                </tr>
              </thead>
              <tbody>
                <!--Details of an event booking-->
                <% bookings.forEach(booking => { %>
                  <tr>
                    <!--Personal details and event name of user-->
                    <td><%= booking.id %></td>
                    <td><%= booking.event_title %></td>
                    <td><%= booking.name %></td>
                    <td><%= booking.email %></td>
                    <!--Number of tickets chosen-->
                    <td class="text-center">
                      <%= booking.tickets_full > 0 ? booking.tickets_full : '-' %>
                    </td>
                    <td class="text-center">
                      <%= booking.tickets_concession > 0 ? booking.tickets_concession : '-' %>
                    </td>
                    <td class="text-center">
                      <%= (booking.tickets_full || 0) + (booking.tickets_concession || 0) %>
                    </td>
                    <td><%= booking.created_at %></td>
                  </tr>
                <% }); %>
              </tbody>
            </table>
          </div>
        <% } %>

      </div>
      <div class="card-footer text-end">
      <!--Button to go back to organiser home page-->
        <a href="/organiser" class="btn btn-secondary">Back to Home</a>
      </div>
    </div>
  </div>

</body>
</html>
